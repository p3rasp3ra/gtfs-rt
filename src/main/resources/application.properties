spring.application.name=gtfs-rt

# Active Profiles - Explicitly set to default (prevents docker profile from loading)
spring.profiles.active=default

# Server Configuration
server.port=8088

# Disable Docker Compose integration completely
spring.docker.compose.enabled=false
spring.docker.compose.skip.in-tests=true

# Database Configuration (PostgreSQL/TimescaleDB)
spring.datasource.url=jdbc:postgresql://localhost:5432/gtfs_realtime_db
spring.datasource.username=gtfsuser
spring.datasource.password=gtfs_password
spring.datasource.driver-class-name=org.postgresql.Driver

# Flyway Configuration
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration

# JPA/Hibernate Configuration
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.jdbc.time_zone=UTC

# HikariCP Connection Pool Configuration
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=300000

# MQTT Configuration
mqtt.url=tcp://localhost:1883
mqtt.clientId=gtfs-rt-client
mqtt.topics=gtfs/vehiclePosition,gtfs/tripUpdate,gtfs/serviceAlert

# Kafka Configuration
spring.kafka.bootstrap-servers=localhost:9093
spring.kafka.consumer.group-id=gtfs-rt-processor
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.enable-auto-commit=false
spring.kafka.consumer.max-poll-records=100
spring.kafka.consumer.fetch-min-size=1024

# Kafka Topics
kafka.topics.vehicle-positions=gtfsrt.vp.raw
kafka.topics.vehicle-positions-proto=vp-proto
kafka.topics.trip-updates=gtfsrt.tu.raw
kafka.topics.service-alerts=gtfsrt.sa.raw

# Kafka DLQ Topics (separate per consumer group)
kafka.topics.vehicle-positions.slow-path-dlq=gtfsrt.vp.slow-path.DLT
kafka.topics.vehicle-positions.fast-path-dlq=gtfsrt.vp.fast-path.DLT

# Kafka Consumer Groups
kafka.consumer.group-id-fast=vp-fast-consumer
kafka.consumer.group-id-slow=vp-slow-consumer

# MQTT Configuration (Digitransit format)
mqtt.broker.url=tcp://localhost:1883
mqtt.client.id=gtfs-rt-service
mqtt.username=
mqtt.password=
mqtt.qos=1

# Redis Configuration
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.timeout=2000ms

# Virtual Threads Configuration
spring.threads.virtual.enabled=true

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.probes.enabled=true
management.tracing.sampling.probability=1.0

# GTFS-RT Feed Configuration
gtfs.feed.version=2.0
gtfs.feed.incrementality=FULL_DATASET
gtfs.feed.cache.ttl-seconds=30

